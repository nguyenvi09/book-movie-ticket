"use strict";(self.webpackChunkmovie_booking=self.webpackChunkmovie_booking||[]).push([[48],{5048:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var a=t(2791),i=t(7031),r=t(7309),o=t(3249),h=t(1730),c=t(9434),s=t(9946),u=t(6871),l=t(9439),m=t(6054),d=t(6675),g=t(1666),p=t(5581),f=t(8243),x=t(5705),v=t(2426),j=t.n(v),Z=t(2226),C=t(184),b=function(){var e,n=(0,a.useState)(!1),t=(0,l.Z)(n,2),o=t[0],h=t[1],u=function(){h(!1)},v=(0,a.useState)("default"),b=(0,l.Z)(v,2),y=b[0],P=b[1],T=(0,a.useState)(""),S=(0,l.Z)(T,2),w=S[0],I=S[1],k=(0,c.I0)(),A=(0,x.TA)({initialValues:{maNhom:Z.WY,tenPhim:"",trailer:"",moTa:"",ngayKhoiChieu:"",dangChieu:!1,sapChieu:!1,hot:!1,danhGia:0,hinhAnh:{}},onSubmit:function(e,n){var t=n.resetForm;e.maNhom=Z.WY;var a=new FormData;for(var i in e)"hinhAnh"!==i?a.append(i,e[i]):a.append("File",e.hinhAnh,e.hinhAnh.name);k((0,s.uT)(a)),t(),u()}}),M=function(e){return function(n){return A.setFieldValue(e,n)}};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.Z,{style:{backgroundColor:"green"},type:"primary",onClick:function(){h(!0)},children:"Th\xeam phim m\u1edbi"}),(0,C.jsx)(m.Z,{visible:o,onCancel:u,footer:null,children:(0,C.jsx)("div",{className:"container",children:(0,C.jsxs)(d.Z,{onSubmitCapture:A.handleSubmit,labelCol:{span:6},wrapperCol:{span:14},layout:"horizontal",initialValues:{size:y},onValuesChange:function(e){var n=e.size;P(n)},size:y,children:[(0,C.jsx)("h1",{children:"Th\xeam phim m\u1edbi "}),(0,C.jsx)(d.Z.Item,{label:"T\xean phim",children:(0,C.jsx)(i.Z,{name:"tenPhim",onChange:A.handleChange})}),(0,C.jsx)(d.Z.Item,{label:"Trailer",children:(0,C.jsx)(i.Z,{name:"trailer",onChange:A.handleChange})}),(0,C.jsx)(d.Z.Item,{label:"M\xf4 t\u1ea3",children:(0,C.jsx)(i.Z,{name:"moTa",onChange:A.handleChange})}),(0,C.jsx)(d.Z.Item,{label:"Ng\xe0y kh\u1edfi chi\u1ebfu",children:(0,C.jsx)(g.Z,{format:"DD/MM/YYYY",onChange:function(e){var n=j()(e).format("DD/MM/YYYY");A.setFieldValue("ngayKhoiChieu",n)}})}),(0,C.jsx)(d.Z.Item,{label:"\u0110ang chi\u1ebfu",children:(0,C.jsx)(p.Z,{onChange:M("dangChieu")})}),(0,C.jsx)(d.Z.Item,{label:"S\u1eafp chi\u1ebfu",children:(0,C.jsx)(p.Z,{onChange:M("sapChieu")})}),(0,C.jsx)(d.Z.Item,{label:"Hot",children:(0,C.jsx)(p.Z,{onChange:M("hot")})}),(0,C.jsx)(d.Z.Item,{label:"S\u1ed1 sao",children:(0,C.jsx)(f.Z,{onChange:(e="danhGia",function(n){return A.setFieldValue(e,n)}),min:1,max:10})}),(0,C.jsxs)(d.Z.Item,{label:"H\xecnh \u1ea3nh",children:[(0,C.jsx)("input",{type:"file",accept:"image/png, image/jpeg,image/gif,image/png",onChange:function(e){var n=e.target.files[0];if("image/jpeg"===n.type||"image/jpg"===n.type||"image/gif"===n.type||"image/png"===n.type){var t=new FileReader;t.readAsDataURL(n),t.onload=function(e){I(e.target.result)},A.setFieldValue("hinhAnh",n)}}}),(0,C.jsx)("br",{}),(0,C.jsx)("img",{style:{width:150,height:150},src:w,alt:"...",accept:"image/png, image/jpeg,image/gif,image/png"})]}),(0,C.jsx)("div",{style:{textAlign:"right"},children:(0,C.jsx)("button",{type:"submit",className:"bg-success text-white p-2",children:"Th\xeam phim"})})]})})})]})},y=t(4165),P=t(5861),T=function(e){var n,t=(0,a.useState)(!1),o=(0,l.Z)(t,2),h=o[0],u=o[1],v=function(){u(!1)},b=(0,a.useState)("default"),T=(0,l.Z)(b,2),S=T[0],w=T[1],I=(0,a.useState)(""),k=(0,l.Z)(I,2),A=k[0],M=k[1],F=(0,c.I0)(),D=e.film,L=(0,x.TA)({enableReinitialize:!0,initialValues:{maPhim:D.maPhim,tenPhim:D.tenPhim,trailer:D.trailer,moTa:D.moTa,ngayKhoiChieu:D.ngayKhoiChieu,dangChieu:D.dangChieu,sapChieu:D.sapChieu,hot:D.hot,danhGia:D.danhGia,hinhAnh:null,maNhom:Z.WY},onSubmit:function(e){e.maNhom=Z.WY;var n=new FormData;for(var t in e)"hinhAnh"!==t?n.append(t,e[t]):null!==e.hinhAnh&&n.append("File",e.hinhAnh,e.hinhAnh.name);F((0,s.Vv)(n)),v()}}),V=function(e){return function(n){return L.setFieldValue(e,n)}},Y=function(){var e=(0,P.Z)((0,y.Z)().mark((function e(n){var t,a;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/jpeg"!==(t=n.target.files[0]).type&&"image/jpg"!==t.type&&"image/gif"!==t.type&&"image/png"!==t.type){e.next=7;break}return e.next=4,L.setFieldValue("hinhAnh",t);case 4:(a=new FileReader).readAsDataURL(t),a.onload=function(e){M(e.target.result)};case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.Z,{type:"primary",onClick:function(){u(!0)},children:"S\u1eeda"}),(0,C.jsx)(m.Z,{visible:h,onCancel:v,footer:null,children:(0,C.jsx)("div",{className:"container",children:(0,C.jsxs)(d.Z,{onSubmitCapture:L.handleSubmit,labelCol:{span:6},wrapperCol:{span:14},layout:"horizontal",initialValues:{size:S},onValuesChange:function(e){var n=e.size;w(n)},size:S,children:[(0,C.jsx)("h3",{children:"C\u1eadp nh\u1eadt phim "}),(0,C.jsx)(d.Z.Item,{label:"T\xean phim",children:(0,C.jsx)(i.Z,{name:"tenPhim",onChange:L.handleChange,value:L.values.tenPhim})}),(0,C.jsx)(d.Z.Item,{label:"Trailer",children:(0,C.jsx)(i.Z,{name:"trailer",onChange:L.handleChange,value:L.values.trailer})}),(0,C.jsx)(d.Z.Item,{label:"M\xf4 t\u1ea3",children:(0,C.jsx)(i.Z,{name:"moTa",onChange:L.handleChange,value:L.values.moTa})}),(0,C.jsx)(d.Z.Item,{label:"Ng\xe0y kh\u1edfi chi\u1ebfu",children:(0,C.jsx)(g.Z,{format:"DD/MM/YYYY",onChange:function(e){var n=j()(e);L.setFieldValue("ngayKhoiChieu",n)},value:j()(L.values.ngayKhoiChieu)})}),(0,C.jsx)(d.Z.Item,{label:"\u0110ang chi\u1ebfu",children:(0,C.jsx)(p.Z,{onChange:V("dangChieu"),checked:L.values.dangChieu})}),(0,C.jsx)(d.Z.Item,{label:"S\u1eafp chi\u1ebfu",children:(0,C.jsx)(p.Z,{onChange:V("sapChieu"),checked:L.values.sapChieu})}),(0,C.jsx)(d.Z.Item,{label:"Hot",children:(0,C.jsx)(p.Z,{onChange:V("hot"),checked:L.values.hot})}),(0,C.jsx)(d.Z.Item,{label:"S\u1ed1 sao",children:(0,C.jsx)(f.Z,{onChange:(n="danhGia",function(e){return L.setFieldValue(n,e)}),min:1,max:10,value:L.values.danhGia})}),(0,C.jsxs)(d.Z.Item,{label:"H\xecnh \u1ea3nh",children:[(0,C.jsx)("input",{type:"file",accept:"image/png, image/jpeg,image/gif,image/png",onChange:Y}),(0,C.jsx)("br",{}),(0,C.jsx)("img",{style:{width:150,height:150},src:""===A?D.hinhAnh:A,alt:"...",accept:"image/png, image/jpeg,image/gif,image/png"})]}),(0,C.jsx)("div",{style:{textAlign:"right"},children:(0,C.jsx)("button",{type:"submit",className:"bg-success text-white p-2",children:"C\u1eadp nh\u1eadt phim"})})]})})})]})};var S=function(){var e=(0,c.v9)((function(e){return e.movieManagerReducer})).arrMovieDefault,n=(0,c.I0)();(0,a.useEffect)((function(){n((0,s.B0)())}),[]);var t=i.Z.Search,l=[{title:"M\xe3 phim",dataIndex:"maPhim",sorter:function(e,n){return e.maPhim-n.maPhim},defaultSortOrder:"descend",width:"15%"},{title:"H\xecnh \u1ea3nh",dataIndex:"hinhAnh",render:function(e,n,t){return(0,C.jsx)(a.Fragment,{children:(0,C.jsx)("img",{src:n.hinhAnh,alt:n.tenPhim,width:80,height:90,onError:function(e){e.target.onError=null,e.target.src="https://picsum.photos/id/".concat(t,"/50/50")}})})},width:"15%"},{title:"T\xean phim",dataIndex:"tenPhim",sorter:function(e,n){return e.tenPhim.toLowerCase().trim()>n.tenPhim.toLowerCase().trim()?-1:1},sortDirections:["ascend","descend"],width:"25%"},{title:"M\xf4 t\u1ea3",dataIndex:"moTa",render:function(e,n){return(0,C.jsx)(a.Fragment,{children:n.moTa.length>50?n.moTa.substr(0,50)+" ...":n.moTa})},sortDirections:["descend","ascend"],width:"25%"},{title:"H\xe0nh \u0111\u1ed9ng",dataIndex:"maPhim",render:function(e,t){return(0,C.jsxs)(a.Fragment,{children:[(0,C.jsx)(T,{film:t}),(0,C.jsx)(r.Z,{type:"danger",onClick:function(){window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a phim: "+t.tenPhim)&&n((0,s.Vh)(t.maPhim))},children:"X\xf3a"})]},t.maPhim)},sortDirections:["descend","ascend"],width:"25%"}],m=e;return(0,C.jsxs)("div",{className:"container",children:[(0,C.jsx)(b,{}),(0,C.jsx)(t,{placeholder:"T\xecm ki\u1ebfm phim",enterButton:(0,C.jsx)(h.Z,{}),size:"large",onSearch:function(e){n((0,s.B0)(e))}}),(0,C.jsx)(o.Z,{columns:l,dataSource:m,onChange:function(e,n,t,a){console.log("params",e,n,t,a)},rowKey:"maPhim"}),(0,C.jsx)(u.j3,{})]})}},9946:function(e,n,t){t.d(n,{B0:function(){return h},Vh:function(){return u},Vv:function(){return s},uT:function(){return c}});var a=t(4165),i=t(5861),r=t(2862),o=t(8996),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){var i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.H.getListMovie(e);case 3:i=n.sent,t({type:r.ED,data:i.data.content}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("error",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},c=function(e){return function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.H.addMovieUploadPicture(e);case 3:n.sent,alert("Th\xeam phim th\xe0nh c\xf4ng"),t(h()),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("error",n.t0),alert("L\u1ed7i: "+n.t0.response.data.content);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},s=function(e){return function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){var i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.H.updateMovieUpload(e);case 3:200==n.sent.data.statusCode&&(alert("C\u1eadp nh\u1eadt phim th\xe0nh c\xf4ng"),t(h())),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("error",n.t0),alert(null===(i=n.t0.response)||void 0===i?void 0:i.data.content);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},u=function(e){return function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.H.deleteMovie(e);case 3:n.sent,alert("X\xf3a phim th\xe0nh c\xf4ng!"),t(h()),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("errors",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}},6002:function(e,n,t){t.d(n,{b:function(){return c}});var a=t(3144),i=t(5671),r=t(4569),o=t.n(r),h=t(2226),c=(0,a.Z)((function e(){(0,i.Z)(this,e),this.put=function(e,n){return o()({url:"".concat(h.yK).concat(e),method:"PUT",data:n,headers:{Authorization:localStorage.getItem(h.bc)?"Bearer "+JSON.parse(localStorage.getItem(h.bc)).accessToken:"",TokenCybersoft:h.o3}})},this.post=function(e,n){return o()({url:"".concat(h.yK).concat(e),method:"POST",data:n,headers:{Authorization:localStorage.getItem(h.bc)?"Bearer "+JSON.parse(localStorage.getItem(h.bc)).accessToken:"",TokenCybersoft:h.o3}})},this.get=function(e){return o()({url:"".concat(h.yK).concat(e),method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem(h.o3),TokenCybersoft:h.o3}})},this.delete=function(e){return o()({url:"".concat(h.yK).concat(e),method:"DELETE",headers:{Authorization:localStorage.getItem(h.bc)?"Bearer "+JSON.parse(localStorage.getItem(h.bc)).accessToken:"",TokenCybersoft:h.o3}})}}))},8996:function(e,n,t){t.d(n,{H:function(){return s}});var a=t(3144),i=t(5671),r=t(136),o=t(7277),h=t(2226),c=function(e){(0,r.Z)(t,e);var n=(0,o.Z)(t);function t(){var e;return(0,i.Z)(this,t),(e=n.call(this)).getBanners=function(){return e.get("/api/QuanLyPhim/LayDanhSachBanner")},e.getListMovie=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==n.trim()?e.get("/api/QuanLyPhim/LayDanhSachPhim?maNhom=".concat(h.WY,"&tenPhim=").concat(n)):e.get("/api/QuanLyPhim/LayDanhSachPhim?maNhom=".concat(h.WY))},e.getMovieInfo=function(n){return e.get("/api/QuanLyPhim/LayThongTinPhim?MaPhim=".concat(n))},e.addMovieUploadPicture=function(n){return e.post("/api/QuanLyPhim/ThemPhimUploadHinh",n)},e.updateMovieUpload=function(n){return e.post("/api/QuanLyPhim/CapNhatPhimUpload",n)},e.deleteMovie=function(n){return e.delete("/api/QuanLyPhim/XoaPhim?MaPhim=".concat(n))},e}return(0,a.Z)(t)}(t(6002).b),s=new c}}]);
//# sourceMappingURL=48.3b9b8c1d.chunk.js.map